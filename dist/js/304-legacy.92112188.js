"use strict";(self["webpackChunkfront_end_do_an"]=self["webpackChunkfront_end_do_an"]||[]).push([[304],{87304:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"product-header"},[a("h1",[t._v("Danh sách loại sản phẩm")]),a("div",{staticClass:"m-admin-product-action-add button-show-modal",attrs:{id:"one"}},[a("button",{staticClass:"btn btn-outline-primary",on:{click:t.modalAdd}},[t._v(" Thêm loại sản phẩm ")])])]),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.categoryIndex,callback:function(e){t.categoryIndex=e},expression:"categoryIndex"}},t._l(t.cateParent,(function(e){return a("el-tab-pane",{key:e.id,attrs:{label:e.categoryName}},[a("div",{staticClass:"text-center mb-5"},[a("h4",[t._v("Loại sản phẩm cha")])]),a("div",[a("table",{staticClass:"table table:border secondary-5:border"},[a("thead",[a("tr",t._l(t.tableHeader,(function(e){return a("th",{key:e.name},[a("div",{staticClass:"between:flex center:items"},[a("span",[t._v(t._s(e.text))])])])})),0)]),a("tbody",[a("tr",[a("td",[t._v(t._s(1))]),a("td",[t._v(t._s(e.categoryName))]),a("td"),a("td",[t._v(t._s(e.content))]),a("td",[a("el-switch",{on:{change:function(a){return t.calApiUpdateStatus(e.id)}},model:{value:e.boolActive,callback:function(a){t.$set(e,"boolActive",a)},expression:"e.boolActive"}})],1),a("td",[a("div",{staticClass:"action"},[a("div",{staticClass:"m-product-cart-button-clear m-admin-product-action-add button-show-modal",attrs:{id:"one"}},[a("button",{staticClass:"clear-test",attrs:{type:"button",id:"m-into-choose-product"},on:{click:function(a){return t.ModalEdit(e)}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-pen-to-square"}})],1)])])])])])]),a("hr")]),a("div",{staticClass:"text-center mt-5"},[a("h4",[t._v("Danh sách loại sản phẩm con")])]),a("div",{staticClass:"between:flex bottom:margin-3"},[a("div",{staticClass:"center:flex-items"},[a("span",{staticClass:"right:margin-1"},[t._v("Hiển thị")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentEntries,expression:"currentEntries"}],staticClass:"select",staticStyle:{width:"5rem"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentEntries=e.target.multiple?a:a[0]},t.paginateEntries]}},t._l(t.showEntries,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0),a("span",{staticClass:"left:margin-1"},[t._v("mục")])]),a("div",{staticClass:"end:flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],staticClass:"input px:width-25",attrs:{type:"search",placeholder:"Tìm kiếm tại đấy..."},domProps:{value:t.searchInput},on:{keyup:t.searchEvent,input:function(e){e.target.composing||(t.searchInput=e.target.value)}}})])]),a("div",[a("table",{staticClass:"table table:border secondary-5:border"},[a("thead",[a("tr",t._l(t.tableHeader,(function(e){return a("th",{key:e.name},[a("div",{staticClass:"between:flex center:items"},[a("span",[t._v(t._s(e.text))])])])})),0)]),a("tbody",t._l(t.tableData,(function(n,i){return a("tr",{key:n.id},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(n.categoryName))]),a("td",[t._v(t._s(n.content))]),a("td",[t._v(t._s(e.categoryName))]),a("td",[a("el-switch",{on:{change:function(e){return t.calApiUpdateStatus(n.id)}},model:{value:n.boolActive,callback:function(e){t.$set(n,"boolActive",e)},expression:"td.boolActive"}})],1),a("td",[a("div",{staticClass:"action"},[a("div",{staticClass:"m-product-cart-button-clear m-admin-product-action-add button-show-modal",attrs:{id:"one"}},[a("button",{staticClass:"clear-test",attrs:{type:"button",id:"m-into-choose-product"},on:{click:function(e){return t.ModalEdit(n)}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-pen-to-square"}})],1)])])])])})),0)])]),a("div",{staticClass:"between:flex y:margin-3"},[a("div",[t._v(" Hiển thị từ "+t._s(t.showInfo.from)+" đến "+t._s(t.showInfo.to)+" / "+t._s(t.showInfo.of)+" ")]),a("div",{staticClass:"end:flex"},[a("ul",{staticClass:"pagination:nav"},[a("li",{class:["nav-item",{disabled:1===t.currentPage}]},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.currentPage=1,t.paginateEntries()}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-angles-left"}})],1)]),a("li",{class:["nav-item",{disabled:1===t.currentPage}]},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.currentPage<1?t.currentPage=1:t.currentPage-=1,t.paginateEntries()}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-angle-left"}})],1)]),t._l(t.showPagination,(function(e){return a("li",{key:e,class:["nav-item",{ellipsis:"..."===e,active:e===t.currentPage}]},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.paginateEvent(e)}}},[t._v(t._s(e))])])})),a("li",{class:["nav-item",{disabled:t.currentPage===t.allPages}]},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.currentPage>t.allPages?t.currentPage=t.allPages:t.currentPage+=1,t.paginateEntries()}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-angle-right"}})],1)]),a("li",{class:["nav-item",{disabled:t.currentPage===t.allPages}]},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.currentPage=t.allPages,t.paginateEntries()}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-angles-right"}})],1)])],2)])])])})),1),a("el-dialog",{attrs:{title:"Cập nhập loại sản phẩm",visible:t.dialogFormVisible,width:"60%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("form",{attrs:{id:"m-form-admin-add-product"},on:{submit:function(e){return e.preventDefault(),t.updateCate.apply(null,arguments)}}},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"form-group col-6 form-group-customer"},[a("label",{attrs:{for:"categoryName"}},[t._v("Tên loại sản phẩm")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.category.categoryName.$model,expression:"$v.category.categoryName.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"categoryName",name:"categoryName"},domProps:{value:t.$v.category.categoryName.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.category.categoryName,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.submitted&&!t.$v.category.categoryName.required?a("div",{staticClass:"error"},[t._v(" Vui lòng nhập tên loại sản phẩm ")]):t._e()]),a("div",{staticClass:"col-6 form-group-customer"},[a("label",{attrs:{for:"parent"}},[t._v("Loại sản phẩm cha")]),a("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.category.parentId,expression:"category.parentId",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"parentId",id:"parent",disabled:null==t.category.parentId},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.category,"parentId",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0",selected:""}},[t._v("Chọn sản phẩm cha")]),t._l(t.listParentCate,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.categoryName)+" ")])}))],2)]),a("div",{staticClass:"col-12 d-flex"},[a("label",[t._v("Vui Lòng chọn kích hoạt:")]),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"p-2"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.category.status.$model,expression:"$v.category.status.$model",modifiers:{trim:!0}}],attrs:{type:"radio",name:"active",id:"yes",value:"1"},domProps:{checked:t._q(t.$v.category.status.$model,"1")},on:{change:function(e){return t.$set(t.$v.category.status,"$model","1")}}}),a("label",{attrs:{for:"yes"}},[t._v("Có")])]),a("div",{staticClass:"p-2"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.category.status.$model,expression:"$v.category.status.$model",modifiers:{trim:!0}}],attrs:{type:"radio",name:"active",id:"no",value:"-1"},domProps:{checked:t._q(t.$v.category.status.$model,"-1")},on:{change:function(e){return t.$set(t.$v.category.status,"$model","-1")}}}),a("label",{attrs:{for:"no"}},[t._v("Không")])])]),t.submitted&&!t.$v.category.status.required?a("div",{staticClass:"error"},[t._v(" Vui lòng chọn hoạt động ")]):t._e()]),a("div",{staticClass:"form-group col-12 form-group-customer"},[a("label",{attrs:{for:"categoryName"}},[t._v("Nội dung")]),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.category.content.$model,expression:"$v.category.content.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"content",id:"content",rows:"5"},domProps:{value:t.$v.category.content.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.category.content,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.submitted&&!t.$v.category.content.required?a("div",{staticClass:"error"},[t._v(" Vui lòng nhập nội dung ")]):t._e()])])]),a("span",{staticClass:"dialog-footer d-flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"submit"}},[t._v("Áp dụng")]),a("button",{staticClass:"btn btn-outline-primary ml-2",attrs:{type:"button"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(" Quay lại ")])])])])],1)},i=[],s=(a(41539),a(33948),a(74916),a(64765),a(69720),a(54747),a(38862),a(69826),a(75587)),r=a(46876),o=a(6409),c=a(32424),l={name:"AdminProduct",mixins:[c.oE],components:{},data:function(){return{columns:[{name:"id",text:"ID"},{name:"category",text:"Tên loại sản phẩm"},{name:"content",text:"Nội dung"},{name:"parentId",text:"Loại sản phẩm cha"},{name:"status",text:"Trạng thái"},{name:"#",text:"Hành động"}],entries:[],showEntries:[5,10,15,25,50,72,100],currentEntries:10,filteredEntries:[],currentPage:1,allPages:1,searchInput:"",searchEntries:[],col:{id:"",categoryName:"",content:"",parentId:"",status:""},sortcol:{id:"",categoryName:"",content:"",parentId:"",status:""},check:null,submitted:!1,dialogFormVisible:!1,listParentCate:[],categoryIndex:"",category:{id:"",categoryName:"",content:"",status:"",parentId:"0"}}},validations:{category:{categoryName:{required:o.C1},status:{required:o.C1},content:{required:o.C1}}},computed:{showInfo:function(){return s.uh.show(this.getCurrentEntries(),this.currentPage,this.currentEntries)},showPagination:function(){return s.uh.pagination(this.allPages,this.currentPage,2)},tableHeader:function(){return this.columns},tableData:function(){return this.filteredEntries},cateParent:function(){return this.listParentCate}},created:function(){var t=this;(0,r.DW)().then((function(e){t.listParentCate=e,t.entries=t.listParentCate[0].listChild,t.paginateData(t.entries)}))},methods:{paginateEntries:function(){this.searchInput.length>0?(this.searchEntries=s.uh.search(this.entries,this.searchInput),this.paginateData(this.searchEntries)):(this.searchEntries=[],this.paginateData(this.entries),this.col={id:"",categoryName:"",content:"",parentId:"",status:""})},paginateEvent:function(t){this.currentPage=t,this.paginateEntries()},searchEvent:function(){this.currentPage=1,this.paginateEntries()},paginateData:function(t){this.filteredEntries=s.uh.paginate(t,this.currentPage,this.currentEntries),this.allPages=s.uh.pages(t,this.currentEntries)},getCurrentEntries:function(){return this.searchInput.length<=0?this.entries:this.searchEntries},uniqColumData:function(t){return s.uh.unique(this.getCurrentEntries(),t)},filterByColumn:function(){var t=s.T4.removeBy(this.col,""),e=this.getCurrentEntries();Object.entries(t).length>=1&&(e=s.uh.filtered(this.getCurrentEntries(),t)),this.paginateData(e)},sortByColumn:function(t){this.col={id:"",categoryName:"",content:"",parentId:"",status:""};var e=this.getCurrentEntries(),a=this.sortcol[t];""===a?(this.sortcol[t]="asc",e=s.uh.sorted(this.getCurrentEntries(),t,"asc"),this.check=!1):"asc"===a?(this.sortcol[t]="desc",e=s.uh.sorted(this.getCurrentEntries(),t,"desc"),this.check=!0):"desc"===a&&(this.sortcol[t]="",this.check=null),this.paginateData(e)},modalAdd:function(){this.submitted=!1,this.dialogFormVisible=!0,this.category={id:"",categoryName:"",content:"",status:"",parentId:"0"}},ModalEdit:function(t){this.submitted=!1,this.dialogFormVisible=!0,this.category=t},calApiUpdateStatus:function(t){var e=this,a=this;(0,r.rT)(t).then((function(t){e.category.boolActive=t.data.boolActive,null==t.data.parentId&&e.listParentCate.forEach((function(e){e.id==t.data.id&&e.listChild.forEach((function(t){t.boolActive=e.boolActive,t.status=e.status}))})),e.category={id:"",categoryName:"",content:"",status:"",parentId:"0"}})).catch((function(t){console.log(t),a.$swal("Lỗi",t.response.data.data,"error")})),this.submitted=!1,a.dialogFormVisible=!1},handleClick:function(){this.entries=this.listParentCate[this.categoryIndex].listChild,this.paginateData(this.entries)},updateCate:function(t){if(t.preventDefault(),this.submitted=!0,this.$v.$touch(),this.$v.$invalid)console.log("error validate");else{var e=JSON.stringify(this.category);""==this.category.id?this.apiAddCate(e):this.apiEditCate(e)}},apiAddCate:function(t){var e=this,a=this;(0,r.kV)(t).then((function(t){if(console.log(t),null==t.data.parentId||0==t.data.parentId)e.listParentCate.push(t.data);else{var n=e.listParentCate.find((function(a,n){if(a.id==t.data.parentId)return e.categoryIndex=""+n,a.id==t.data.parentId}));n.listChild.push(t.data),e.entries=n.listChild,e.paginateData(e.entries)}a.$swal("Thành công",t.message,"success").then((function(){})),e.category={id:"",categoryName:"",content:"",status:"",parentId:"0"}})).catch((function(t){console.log(t.response),a.$swal("Lỗi",t.response.data.data,"error")})),this.submitted=!1,a.dialogFormVisible=!1},apiEditCate:function(t){var e=this,a=this;(0,r.fT)(t).then((function(t){e.category.boolActive=t.data.boolActive,null==t.data.parentId&&e.listParentCate.forEach((function(e){e.id==t.data.id&&e.listChild.forEach((function(t){t.boolActive=e.boolActive,t.status=e.status}))})),a.$swal("Thành công",t.message,"success").then((function(){})),e.category={id:"",categoryName:"",content:"",status:"",parentId:"0"}})).catch((function(t){console.log(t),a.$swal("Lỗi",t.response.data.data,"error")})),this.submitted=!1,a.dialogFormVisible=!1}},mounted:function(){}},u=l,d=a(43736),h=(0,d.Z)(u,n,i,!1,null,"5088e760",null),m=h.exports},46876:function(t,e,a){a.d(e,{DW:function(){return r},Si:function(){return u},fT:function(){return c},kV:function(){return o},rT:function(){return l}});a(41539);var n=a(31223),i=a(26166),s=(0,n.X)();function r(){return new Promise((function(t,e){var a={method:"get",url:s+"/api/v1/admin/category/parent",headers:{"Content-Type":"application/json"}};i(a).then((function(e){t(e.data.data)})).catch((function(t){e(t)}))}))}function o(t){return new Promise((function(e,a){var n={method:"post",url:s+"/api/v1/admin/category",headers:{"Content-Type":"application/json"},data:t};i(n).then((function(t){e(t.data)})).catch((function(t){a(t)}))}))}function c(t){return new Promise((function(e,a){var n={method:"post",url:s+"/api/v1/admin/category",headers:{"Content-Type":"application/json"},data:t};i(n).then((function(t){e(t.data)})).catch((function(t){a(t)}))}))}function l(t){return new Promise((function(e,a){var n={method:"get",url:s+"/api/v1/admin/category/status/"+t,headers:{"Content-Type":"application/json"}};i(n).then((function(t){e(t.data)})).catch((function(t){a(t)}))}))}function u(){return new Promise((function(t,e){var a={method:"get",url:s+"/api/v2/user/category",headers:{"Content-Type":"application/json"}};i(a).then((function(e){t(e.data.data)})).catch((function(t){console.log(t),e("Wrong email or password")}))}))}}}]);
//# sourceMappingURL=304-legacy.92112188.js.map