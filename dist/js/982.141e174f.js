"use strict";(self["webpackChunkfront_end_do_an"]=self["webpackChunkfront_end_do_an"]||[]).push([[982],{42982:function(t,a,e){e.r(a),e.d(a,{default:function(){return y}});var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("AdminHeaderCampaign",{attrs:{activeValue:0}}),t._m(0),e("form",{attrs:{id:"m-form-admin-add-product"},on:{submit:function(a){return a.preventDefault(),t.campaginCallApi.apply(null,arguments)}}},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Tên sự kiện")]),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.campaign.campaignName.$model,expression:"$v.campaign.campaignName.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Vui lòng nhập tên chiến dịch",id:"campaignName",name:"campaignName"},domProps:{value:t.$v.campaign.campaignName.$model},on:{input:function(a){a.target.composing||t.$set(t.$v.campaign.campaignName,"$model",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}}),t.submitted&&!t.$v.campaign.campaignName.required?e("div",{staticClass:"error"},[t._v(" Tên sự kiện không thể để trống ")]):t._e()])]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Ngày bắt đầu sự kiện")]),e("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"small",name:"birthDay",type:"datetime",placeholder:"dd/MM/yyyy","picker-options":t.pickerOptions,format:"dd/MM/yyyy"},model:{value:t.$v.startDay.$model,callback:function(a){t.$set(t.$v.startDay,"$model","string"===typeof a?a.trim():a)},expression:"$v.startDay.$model"}},[t._v(" > ")]),t.submitted&&!t.$v.startDay.required?e("div",{staticClass:"error"},[t._v(" Ngày bắt đầu không được để trống ")]):t._e(),t.submitted&&t.$v.startDay.required&&new Date(t.startDay)<t.now?e("div",{staticClass:"error"},[t._v(" Ngày bắt đầu không được nhỏ hơn hoặc bằng ngày hiên tại ")]):t._e(),t.submitted&&t.$v.startDay.required&&new Date(t.endDay)<new Date(t.startDay)?e("div",{staticClass:"error"},[t._v(" Ngày bắt đầu không được lớn hơn ngày kết thúc ")]):t._e()],1)]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Ngày kết thúc sự kiện")]),e("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"small",name:"birthDay",type:"datetime",placeholder:"dd/MM/yyyy","picker-options":t.pickerOptions,format:"dd/MM/yyyy"},model:{value:t.$v.endDay.$model,callback:function(a){t.$set(t.$v.endDay,"$model","string"===typeof a?a.trim():a)},expression:"$v.endDay.$model"}},[t._v(" > ")]),t.submitted&&!t.$v.endDay.required?e("div",{staticClass:"error"},[t._v(" Ngày kết thúc không được để trống ")]):t._e(),t.submitted&&t.$v.endDay.required&&new Date(t.endDay)<t.now?e("div",{staticClass:"error"},[t._v(" Ngày kết thúc không được nhỏ hoặc bằng ngày hiên tại ")]):t._e()],1)]),e("div",{staticClass:"col-12"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"content"}},[t._v("Nội dung")]),e("ckeditor",{attrs:{editor:t.editor},model:{value:t.$v.campaign.content.$model,callback:function(a){t.$set(t.$v.campaign.content,"$model","string"===typeof a?a.trim():a)},expression:"$v.campaign.content.$model"}}),t.submitted&&!t.$v.campaign.content.required?e("div",{staticClass:"error"},[t._v(" Nội dung không thể để trống ")]):t._e()],1)]),e("div",{staticClass:"col-12"},[e("div",{staticClass:"d-flex justify-content-around mt-5"},[e("div",[e("button",{staticClass:"btn btn-outline-primary",attrs:{type:"submit",id:"m-into-choose-product"}},[[t._v(" Tạo sự kiện ")]],2)]),e("div",[e("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",plain:""},on:{click:t.cancelCampaign}},[t._v(" Quay lại ")])])])])])])])],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"m-admin-product-action-title text-center border-bottom"},[e("h2",[t._v("Thêm chiến dịch")])])}],r=e(70297),s=e(32424),c=e(6409),o=e(18756),d=e.n(o),l=e(89835),m=e(17133),u=e.n(m),p={components:{AdminHeaderCampaign:r.Z},name:"campaign-add",mixins:[s.oE],data(){return{submitted:!1,editor:d(),now:new Date,campaign:{campaignName:"",content:"",startDay:"",endDay:""},startDay:"",endDay:"",pickerOptions:{shortcuts:[{text:"Hiện tại",onClick(t){t.$emit("pick",new Date)}},{text:"Hôm qua",onClick(t){const a=new Date;a.setTime(a.getTime()-864e5),t.$emit("pick",a)}},{text:"1 tuần trước",onClick(t){const a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",a)}}]}}},validations:{campaign:{campaignName:{required:c.C1},content:{required:c.C1}},startDay:{required:c.C1},endDay:{required:c.C1}},methods:{campaginCallApi(t){let a=this;if(t.preventDefault(),this.submitted=!0,this.$v.$touch(),this.$v.$invalid)console.log("error validate");else{let t=u()(this.startDay).format("YYYY-MM-DD");this.campaign.startDay=t;let e=u()(this.endDay).format("YYYY-MM-DD");this.campaign.endDay=e;let n=JSON.stringify(this.campaign);console.log(n),(0,l.Ec)(n).then((t=>{a.$swal("Thành công","Tạo chiến dịch thành công","success").then((function(){a.$router.push(`/admin/campaign/${t}/detail`)}))})).catch((t=>{console.log(t),a.$swal("Thất bại","Tạo chiến dịch thất bại","error")}))}},cancelCampaign(){this.$router.push("/admin/campaign")}}},h=p,v=e(43736),g=(0,v.Z)(h,n,i,!1,null,"79e8bc4a",null),y=g.exports},70297:function(t,a,e){e.d(a,{Z:function(){return d}});var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mt-3"},[e("div",{staticClass:"container"},[e("el-steps",{attrs:{active:t.active,"finish-status":"success"}},[e("el-step",{attrs:{title:"Tạo sự kiện"}}),e("el-step",{attrs:{title:"Thêm thêm chi tiết sự kiện"}}),e("el-step",{attrs:{title:"Hoàn tất"}})],1)],1)])},i=[],r={props:{activeValue:Number},data(){return{active:this.activeValue}}},s=r,c=e(43736),o=(0,c.Z)(s,n,i,!1,null,"40d5dbbe",null),d=o.exports},89835:function(t,a,e){e.d(a,{Ec:function(){return o},Ot:function(){return d},bn:function(){return l},ds:function(){return m},nt:function(){return s},yJ:function(){return c}});var n=e(31223),i=e(26166);let r=(0,n.X)();function s(){return new Promise(((t,a)=>{var e={method:"get",url:r+"/api/v1/admin/campaign",headers:{"Content-Type":"application/json"}};i(e).then((function(a){t(a.data.data)})).catch((function(t){a(t)}))}))}function c(t){return new Promise(((a,e)=>{var n={method:"get",url:r+"/api/v1/admin/campaign/detail/"+t,headers:{"Content-Type":"application/json"}};i(n).then((function(t){a(t.data.data)})).catch((function(t){e(t)}))}))}function o(t){return new Promise(((a,e)=>{var n={method:"post",url:r+"/api/v1/admin/campaign/add",headers:{"Content-Type":"application/json"},data:t};i(n).then((function(t){a(t.data.data)})).catch((function(t){e(t)}))}))}function d(t){return new Promise(((a,e)=>{var n={method:"post",url:r+"/api/v1/admin/campaign/detail/add",headers:{"Content-Type":"application/json"},data:t};i(n).then((function(t){a(t.data.data)})).catch((function(t){e(t)}))}))}function l(){return new Promise(((t,a)=>{var e={method:"get",url:r+"/api/v1/admin/campaign/detail/product",headers:{"Content-Type":"application/json"}};i(e).then((function(a){t(a.data.data)})).catch((function(t){a(t)}))}))}function m(t){return new Promise(((a,e)=>{var n={method:"get",url:r+"/api/v1/admin/campaign/finish?campaignId="+t,headers:{"Content-Type":"application/json"}};i(n).then((function(t){a(t.data.data)})).catch((function(t){e(t)}))}))}}}]);
//# sourceMappingURL=982.141e174f.js.map