"use strict";(self["webpackChunkfront_end_do_an"]=self["webpackChunkfront_end_do_an"]||[]).push([[86],{58086:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-5"},[s("HeaderCart",{attrs:{activeValue:t.activeValue}}),s("div",{staticClass:"container mt-5"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-8 product"},[t._m(0),s("div",[s("table",{staticClass:"table table secondary-5:border text-center"},[t._m(1),t.listProduct.length>=0?s("tbody",t._l(t.getListProduct,(function(e,i){return s("tr",{key:e.id,class:e.totalQuantity<e.quantity?"noQuantity":""},[s("td",[t._v(t._s(i+1))]),s("td",{staticClass:"d-flex"},[s("div",[s("router-link",{attrs:{to:null==e.parentId?"/chi-tiet-san-pham/"+e.id:"/chi-tiet-san-pham/"+e.parentId}},[s("img",{staticClass:"product-img",attrs:{src:e.img,alt:""}})])],1),s("div",{staticClass:"p-4"},[s("router-link",{staticStyle:{color:"black"},attrs:{to:null==e.parentId?"/chi-tiet-san-pham/"+e.id:"/chi-tiet-san-pham/"+e.parentId}},[t._v(" "+t._s(null==e.parentId?e.productName:e.parentName)+" ")]),s("div",{staticClass:"d-flex"},t._l(e.speciality,(function(e){return s("div",{key:e.id},[s("div",[s("button",{staticClass:"product-speciality"},[t._v(" "+t._s(e.description)+" ")])])])})),0)],1)]),s("td",[t._v(t._s(t.toMoney(e.priceSell)))]),s("td",[[s("el-input-number",{attrs:{"size:large":"",min:1,max:e.totalQuantity<e.quantity?100:e.totalQuantity,disabled:0==e.totalQuantity},on:{change:function(s){return t.handleQuantity(e)}},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",s)},expression:"td.quantity"}}),s("div",[s("p",[s("span",[t._v(t._s(e.totalQuantity))]),t._v(" sản phẩm có sẵn ")])])]],2),s("td",{attrs:{id:"total"+e.id}},[t._v(t._s(t.toMoney(e.totalPrice)))]),s("td",[s("div",{on:{click:function(s){return t.deleteProduct(e)}}},[s("font-awesome-icon",{attrs:{icon:"fa-solid fa-xmark"}})],1)])])})),0):t._e(),0==t.listProduct.length?s("tbody",[s("tr",[s("th"),s("th"),s("th",[t._v(t._s(t.errorMessage))]),s("th"),s("th"),s("th")])]):t._e()])])]),s("div",{staticClass:"col-4"},[s("div",{staticClass:"product-bill"},[t._m(2),s("div",{staticClass:"bill-content"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row text-center pl-2 pr-2 pb-4"},[t._m(3),s("div",{staticClass:"col-6 mt-2"},[s("h6",[t._v(t._s(t.toMoney(this.totalBill)))])]),t._m(4),s("div",{staticClass:"col-6 mt-2"},[s("h6",[t._v(t._s(t.toMoney(this.totalBillPay)))])]),s("div",{staticClass:"col-12 mt-2"},[s("button",{staticClass:"btn btn-outline-dark w-100 button-cart",attrs:{type:"button"},on:{click:function(e){return t.toBill()}}},[t._v(" Đặt hàng ")])]),s("div",{staticClass:"col-12 mt-2"},[s("button",{staticClass:"btn btn-outline-dark w-100 button-cart",attrs:{type:"button"},on:{click:function(e){return t.toHome()}}},[t._v(" Tiếp tục mua hàng ")])])]),s("hr")]),t._m(5),t._m(6)])])])])])],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-3"},[s("h4",{staticClass:"text-center"},[t._v("Danh sách sản phẩm")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("th",[t._v("Stt")]),s("th",[t._v("Sản phẩm")]),s("th",[t._v("Giá")]),s("th",[t._v("Số Lượng")]),s("th",[t._v("Tổng")]),s("th")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-3"},[s("h4",{staticClass:"text-center"},[t._v("Đơn hàng")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-6 mt-2"},[s("h6",[t._v("Giá gốc:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-6 mt-2"},[s("h6",[t._v("Tổng tiền thanh toán:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h6",{staticClass:"text-center"},[t._v(" Áp dụng mã giảm giá, C-point tại bước tiếp theo ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("div",[s("h6",[t._v("Chúng tôi chấp nhận thanh toán:")])]),s("img",{attrs:{src:"https://firebasestorage.googleapis.com/v0/b/san-ho-do-an-dai-duong.appspot.com/o/banner%2Fpayment-note.svg?alt=media",alt:""}})])}],n=s(61396),l=s(10928),r={data(){return{activeValue:0,listProduct:[],totalBill:0,feeShip:0,totalBillPay:0,errorMessage:"Chưa có sản phẩm nào !"}},components:{HeaderCart:n.Z},computed:{getListProduct(){return console.log(this.listProduct),this.listProduct}},created(){this.checkGetListProduct(),window.scrollTo(0,0)},methods:{checkGetListProduct(){if(this.$store.getters.CURRENT_USER)(0,l.go)().then((t=>{Array.isArray(t)?this.listProduct=t:this.listProduct=[],this.sumMoney()})).catch((t=>{console.log(t.response.data)}));else{let t=localStorage.getItem("CART"),e={listProduct:JSON.parse(t)};e=JSON.stringify(e),(0,l.lC)(e).then((t=>{this.listProduct=t,this.sumMoney()})).catch((t=>{console.log(t.response.data)}))}},handleQuantity(t){t.totalPrice=+t.quantity*+t.priceSell;let e="total"+t.id;if(document.getElementById(e).innerHTML=this.toMoney(t.totalPrice),this.sumMoney(),this.$store.getters.CURRENT_USER){let e={productId:t.id,quantity:t.quantity,billId:t.billId};e=JSON.stringify(e),(0,l.R)(e).then((t=>{console.log(t),this.$root.$refs.userHeader.totalItemByCart()})).catch((t=>{console.log(t)}))}else this.$store.commit("CHANGE_QUANTITY",t),this.$root.$refs.userHeader.totalItemByCart()},deleteProduct(t){if(this.$store.getters.CURRENT_USER){let e=this,s={productId:t.id,quantity:t.quantity,billId:t.billId};s=JSON.stringify(s),(0,l.$9)(s).then((s=>{console.log(s),e.listProduct=e.listProduct.filter((e=>e.id!=t.id)),this.sumMoney(),this.$root.$refs.userHeader.totalItemByCart()})).catch((t=>{console.log(t)}))}else this.$store.commit("DELETE_PRODUCT_CART",t.id),this.listProduct=this.listProduct.filter((e=>e.id!=t.id)),this.$root.$refs.userHeader.totalItemByCart(),this.sumMoney()},sumMoney(){this.totalBill=0,this.listProduct.forEach((t=>{this.totalBill+=t.totalPrice})),this.totalBill>5e5&&(this.feeShip=0),this.totalBillPay=this.totalBill+this.feeShip},toMoney(t){var e=new Intl.NumberFormat("it-IT",{style:"currency",currency:"VND"});return e.format(t)},toBill(){let t=this.listProduct.filter((t=>t.totalQuantity<t.quantity));t&&t.length>0?this.$swal("Xin lỗi","Một số sản phẩm trong giỏ hàng hiện tại đang hết hàng. Quý khách vui lòng chọn sản phẩm khác để thay thế","error"):this.listProduct&&0==this.listProduct.length?this.$swal("Chưa có sản phẩm trong giỏ hàng","Quý khách vui lòng chọn sản phẩm","error"):(this.$store.getters.CURRENT_USER||this.$store.commit("SET_PATH","/dat-hang"),this.$router.push("/dat-hang"))},toHome(){this.$router.push("/")}}},o=r,c=s(43736),h=(0,c.Z)(o,i,a,!1,null,"68053fee",null),u=h.exports},61396:function(t,e,s){s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container"},[s("el-steps",{attrs:{active:t.active,"finish-status":"success"}},[s("el-step",{attrs:{title:"Giỏ hàng"}}),s("el-step",{attrs:{title:"Đặt hàng"}}),s("el-step",{attrs:{title:"Hoàn tất"}})],1)],1)])},a=[],n={props:{activeValue:Number},data(){return{active:this.activeValue}}},l=n,r=s(43736),o=(0,r.Z)(l,i,a,!1,null,"d64159e6",null),c=o.exports}}]);
//# sourceMappingURL=86.7f7ed7b1.js.map