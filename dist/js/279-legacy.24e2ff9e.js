"use strict";(self["webpackChunkfront_end_do_an"]=self["webpackChunkfront_end_do_an"]||[]).push([[279],{42279:function(t,n,e){e.r(n),e.d(n,{default:function(){return h}});var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t._m(0),e("div",{staticClass:"container mt-5"},[e("div",{staticClass:"container mb-3"},[e("h4",[t._v(' Từ khóa "'+t._s(t.searchProduct)+'". Tổng kết quả tìm kiếm '+t._s(t.result)+" sản phẩm ")])]),e("div",[e("el-input",{attrs:{placeholder:"Nhập tên sản phẩm cần tìm !","prefix-icon":"el-icon-search"},model:{value:t.searchObject.search,callback:function(n){t.$set(t.searchObject,"search",n)},expression:"searchObject.search"}})],1)]),e("hr"),e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[0==t.listProduct.length?e("h3",{staticClass:"text-center"},[t._v(" Không có sản phẩm nào ! ")]):t._e()]),t._l(t.listData,(function(n){return e("div",{key:n.id,staticClass:"mt-5 col-3"},[e("div",{staticClass:"product-list"},[e("router-link",{attrs:{to:"/chi-tiet-san-pham/"+n.id}},[e("div",{staticClass:"single-gallery-image",style:"background: url("+n.img+")"})]),e("div",{staticClass:"product-action"},[e("button",{staticClass:"icon-heart",domProps:{innerHTML:t._s(n.favorite?t.like:t.dislike)},on:{click:function(e){return t.favoriteProduct(n)}}})])],1),e("div",{staticClass:"product-detail"},[e("div",{staticClass:"product-name"},[e("router-link",{attrs:{to:"/chi-tiet-san-pham/"+n.id}},[t._v(" "+t._s(n.productName)+" ")])],1),e("div",{staticClass:"price-sell"},[0!=n.sale?e("span",[e("span",{staticStyle:{color:"black","text-decoration":"line-through"}},[t._v(t._s(t.toMoney(n.priceSell/((100-n.sale)/100)))+" ")]),e("span",[t._v("- "+t._s(t.toMoney(n.priceSell))+" (-"+t._s(n.sale)+")%")])]):t._e(),0==n.sale?e("span",{staticStyle:{color:"black"}},[t._v(" "+t._s(t.toMoney(n.priceSell))+" ")]):t._e()])])])}))],2)]),e("div",{staticClass:"mt-4",staticStyle:{width:"100%","text-align":"center"}},[e("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalPageSearch,"page-size":1,"current-page":t.searchObject.page},on:{"current-change":t.handleCurrentChange}})],1)])},r=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"m-banner"},[e("div",{staticClass:"m-banner-details"},[e("span")])])}],i=e(16198),c=(e(78975),e(74916),e(64765),e(38862),e(17431)),o={name:"Search",data:function(){return{listProduct:[],result:0,searchObject:{search:"",page:1,limit:8},dislike:'<i class="far fa-heart"></i>',like:'<i class="fas fa-heart"></i>',totalPageSearch:1,checkPagination:!1}},created:function(){},computed:{listData:function(){return this.listProduct},searchProduct:function(){return this.sortApiCall(),this.searchObject.search}},methods:{sortApiCall:function(){this.checkPagination||(this.searchObject.page=1);var t=JSON.stringify(this.searchObject);this.callApi(t),this.callApiTotal(t),this.callApiTotalPage(t),this.checkPagination=!1},callApi:function(t){var n=this;(0,c.M1)(t).then((function(t){n.listProduct=t})).catch((function(t){console.log(t.response.data)}))},callApiTotal:function(t){var n=this;(0,c.eM)(t).then((function(t){n.result=t})).catch((function(t){console.log(t.response.data)}))},callApiTotalPage:function(t){var n=this;(0,c.MG)(t).then((function(t){n.totalPageSearch=t})).catch((function(t){console.log(t.response.data)}))},toMoney:function(t){var n=new Intl.NumberFormat("it-IT",{style:"currency",currency:"VND"});return n.format(t)},favoriteProduct:function(t){var n=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=n.$root.$refs.userHeader.favoriteProductHeader(t.id),a.then((function(n){t.favorite=1!=n}));case 2:case"end":return e.stop()}}),e)})))()},handleCurrentChange:function(t){this.checkPagination=!0,this.searchObject.page=t}}},s=o,u=e(43736),l=(0,u.Z)(s,a,r,!1,null,"bccd081a",null),h=l.exports},17431:function(t,n,e){e.d(n,{BY:function(){return c},M1:function(){return s},MG:function(){return l},Vo:function(){return o},eM:function(){return u}});e(41539);var a=e(31223),r=e(26166),i=(0,a.X)();function c(t){return new Promise((function(n,e){var a={method:"post",url:i+"/api/v1/user/product/filter",headers:{"Content-Type":"application/json"},data:t};r(a).then((function(t){n(t.data.data)})).catch((function(t){e(t)}))}))}function o(t){return new Promise((function(n,e){var a={method:"post",url:i+"/api/v1/user/product/filter/total/page",headers:{"Content-Type":"application/json"},data:t};r(a).then((function(t){n(t.data.data)})).catch((function(t){e(t)}))}))}function s(t){return new Promise((function(n,e){var a={method:"post",url:i+"/api/v1/user/product/search",headers:{"Content-Type":"application/json"},data:t};r(a).then((function(t){n(t.data.data)})).catch((function(t){e(t)}))}))}function u(t){return new Promise((function(n,e){var a={method:"post",url:i+"/api/v1/user/product/search/total",headers:{"Content-Type":"application/json"},data:t};r(a).then((function(t){n(t.data.data)})).catch((function(t){e(t)}))}))}function l(t){return new Promise((function(n,e){var a={method:"post",url:i+"/api/v1/user/product/search/totalPage",headers:{"Content-Type":"application/json"},data:t};r(a).then((function(t){n(t.data.data)})).catch((function(t){e(t)}))}))}},16198:function(t,n,e){e.d(n,{Z:function(){return r}});e(41539);function a(t,n,e,a,r,i,c){try{var o=t[i](c),s=o.value}catch(u){return void e(u)}o.done?n(s):Promise.resolve(s).then(a,r)}function r(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var c=t.apply(n,e);function o(t){a(c,r,i,o,s,"next",t)}function s(t){a(c,r,i,o,s,"throw",t)}o(void 0)}))}}}}]);
//# sourceMappingURL=279-legacy.24e2ff9e.js.map