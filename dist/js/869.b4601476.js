"use strict";(self["webpackChunkfront_end_do_an"]=self["webpackChunkfront_end_do_an"]||[]).push([[869],{73869:function(t,a,e){e.r(a),e.d(a,{default:function(){return f}});var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"product-header"},[e("h1",[t._v("Danh sách sự kiện")]),e("div",{staticClass:"m-admin-product-action-add"},[e("router-link",{attrs:{to:"/admin/campaign/add"}},[e("button",{staticClass:"btn btn-outline-primary"},[t._v(" Tạo sự kiện ")])])],1)]),e("div",{staticClass:"between:flex bottom:margin-3"},[e("div",{staticClass:"center:flex-items"},[e("span",{staticClass:"right:margin-1"},[t._v("Hiển thị")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.currentEntries,expression:"currentEntries"}],staticClass:"select",staticStyle:{width:"5rem"},on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.currentEntries=a.target.multiple?e:e[0]},t.paginateEntries]}},t._l(t.showEntries,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(" "+t._s(a)+" ")])})),0),e("span",{staticClass:"left:margin-1"},[t._v("mục")])]),e("div",{staticClass:"end:flex"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],staticClass:"input px:width-25",attrs:{type:"search",placeholder:"Tìm kiếm tại đấy..."},domProps:{value:t.searchInput},on:{keyup:t.searchEvent,input:function(a){a.target.composing||(t.searchInput=a.target.value)}}})])]),e("div",[e("table",{staticClass:"table table:border secondary-5:border"},[e("thead",[e("tr",t._l(t.tableHeader,(function(a){return e("th",{key:a.name},[e("div",{staticClass:"between:flex center:items"},[e("span",[t._v(t._s(a.text))]),e("span",{on:{click:function(e){return e.preventDefault(),t.sortByColumn(a.name)}}},[null==t.check?e("div",[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-sort"}})],1):t._e(),0==t.check?e("div",[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-sort-down"}})],1):t._e(),t.check?e("div",[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-sort-up"}})],1):t._e()])])])})),0)]),e("tbody",t._l(t.tableData,(function(a,n){return e("tr",{key:a.id},[e("td",[t._v(t._s(n+1))]),e("td",[t._v(t._s(a.campaignName))]),e("td",{domProps:{innerHTML:t._s(a.content)}}),e("td",[t._v(t._s(t.formatDate(a.startDay)))]),e("td",[t._v(t._s(t.formatDate(a.endDay)))]),e("td",{domProps:{innerHTML:t._s(t.checkStatus(a.status))}}),e("td",[e("div",{staticClass:"action"},[1!=a.status?e("div",{staticClass:"button-show-modal m-product-cart-button-clear",attrs:{id:"one"}},[e("button",{staticClass:"clear-test",attrs:{type:"button",id:"m-into-choose-product"},on:{click:function(e){return t.openModal(a.id)}}},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-plus"}})],1)]):t._e(),1==a.status||2==a.status?e("div",{staticClass:"m-product-cart-button-clear"},[e("button",{staticClass:"clear-test",attrs:{type:"button",id:"m-into-choose-product"},on:{click:function(e){return t.edit(a.id)}}},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-pen-to-square"}})],1)]):t._e()])])])})),0)])]),e("div",{staticClass:"between:flex y:margin-3"},[e("div",[t._v(" Hiển thị từ "+t._s(t.showInfo.from)+" đến "+t._s(t.showInfo.to)+" / "+t._s(t.showInfo.of)+" ")]),e("div",{staticClass:"end:flex"},[e("ul",{staticClass:"pagination:nav"},[e("li",{class:["nav-item",{disabled:1===t.currentPage}]},[e("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.currentPage=1,t.paginateEntries()}}},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-angles-left"}})],1)]),e("li",{class:["nav-item",{disabled:1===t.currentPage}]},[e("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.currentPage<1?t.currentPage=1:t.currentPage-=1,t.paginateEntries()}}},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-angle-left"}})],1)]),t._l(t.showPagination,(function(a){return e("li",{key:a,class:["nav-item",{ellipsis:"..."===a,active:a===t.currentPage}]},[e("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.paginateEvent(a)}}},[t._v(t._s(a))])])})),e("li",{class:["nav-item",{disabled:t.currentPage===t.allPages}]},[e("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.currentPage>t.allPages?t.currentPage=t.allPages:t.currentPage+=1,t.paginateEntries()}}},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-angle-right"}})],1)]),e("li",{class:["nav-item",{disabled:t.currentPage===t.allPages}]},[e("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.currentPage=t.allPages,t.paginateEntries()}}},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-angles-right"}})],1)])],2)])]),e("div",{attrs:{id:"modal-container"}},[e("div",{staticClass:"modal-background"},[e("div",{staticClass:"modal",staticStyle:{width:"90%",height:"90vh"}},[e("div",{staticClass:"table-wrapper-scroll-modal-y my-custom-scrollbar-modal p-5"},[t._m(0),t._m(1),e("div",{staticClass:"m-product-cart-context table-wrapper-scroll-y my-custom-scrollbar",staticStyle:{height:"70vh"}},[e("table",{staticClass:"table table:border secondary-5:border"},[t._m(2),e("tbody",[0==t.listCampaignDetail.length?e("tr",[t._m(3)]):t._e(),t._l(t.listCampaignDetail,(function(a,n){return e("tr",{key:a.id},[e("td",[t._v(t._s(n+1))]),e("td",t._l(a.productName,(function(a){return e("div",{key:a.id},[e("div",{staticClass:"text-sm-left"},[t._v(t._s(a))])])})),0),e("td",[t._v(t._s(a.discount)+"%")]),e("td",[e("div",{staticClass:"action"},[e("div",{staticClass:"m-product-cart-button-clear"},[e("button",{staticClass:"clear-test",attrs:{type:"button",id:"m-into-choose-product"}},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-pen-to-square"}})],1)])])])])}))],2)])])])])])])])},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"text-center mt-2 header-modal-customer"},[e("h2",[t._v("Chi tiết chiến dịch")]),e("div",{staticClass:"button-show-modal-out"},[e("i",{staticClass:"fas fa-times"})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex justify-content-center"},[e("div",{staticClass:"m-admin-product-action-search"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("#")]),e("th",[t._v("Sản phẩm thuộc chiến dịch")]),e("th",[t._v("Phần trăm giảm giá")]),e("th",[t._v("Hành động")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("td",{attrs:{colspan:"4"}},[e("h4",[t._v("Chưa có chi tiết chiến dịch")])])}],i=e(75587),r=e(89835),o=e(17133),c=e.n(o),l=e(74029),u=e.n(l),d={name:"AdminProduct",components:{},data(){return{columns:[{name:"id",text:"ID"},{name:"campaignName",text:"Tên sự kiện"},{name:"content",text:"Mô tả"},{name:"startDay",text:"Ngày bắt đầu"},{name:"endDay",text:"Ngày kết thúc"},{name:"status",text:"Trạng thái"},{name:"#",text:"Hành động"}],entries:[],showEntries:[5,10,15,25,50,72,100],currentEntries:10,filteredEntries:[],currentPage:1,allPages:1,searchInput:"",searchEntries:[],col:{id:"",campaignName:"",content:"",startDay:"",endDay:"",status:""},sortcol:{id:"",campaignName:"",content:"",startDay:"",endDay:"",status:""},check:null,listCampaignDetail:[]}},computed:{showInfo(){return i.uh.show(this.getCurrentEntries(),this.currentPage,this.currentEntries)},showPagination(){return i.uh.pagination(this.allPages,this.currentPage,2)},tableHeader(){return this.columns},tableData(){return this.filteredEntries}},created(){(0,r.nt)().then((t=>{console.log(t),this.entries=t,this.paginateData(this.entries)}))},methods:{paginateEntries(){this.searchInput.length>0?(this.searchEntries=i.uh.search(this.entries,this.searchInput),this.paginateData(this.searchEntries)):(this.searchEntries=[],this.paginateData(this.entries),this.col={id:"",campaignName:"",content:"",startDay:"",endDay:"",status:""})},paginateEvent(t){this.currentPage=t,this.paginateEntries()},searchEvent(){this.currentPage=1,this.paginateEntries()},paginateData(t){this.filteredEntries=i.uh.paginate(t,this.currentPage,this.currentEntries),this.allPages=i.uh.pages(t,this.currentEntries)},getCurrentEntries(){return this.searchInput.length<=0?this.entries:this.searchEntries},uniqColumData(t){return i.uh.unique(this.getCurrentEntries(),t)},filterByColumn(){const t=i.T4.removeBy(this.col,"");let a=this.getCurrentEntries();Object.entries(t).length>=1&&(a=i.uh.filtered(this.getCurrentEntries(),t)),this.paginateData(a)},sortByColumn(t){this.col={id:"",campaignName:"",content:"",startDay:"",endDay:"",status:""};let a=this.getCurrentEntries(),e=this.sortcol[t];""===e?(this.sortcol[t]="asc",a=i.uh.sorted(this.getCurrentEntries(),t,"asc"),this.check=!1):"asc"===e?(this.sortcol[t]="desc",a=i.uh.sorted(this.getCurrentEntries(),t,"desc"),this.check=!0):"desc"===e&&(this.sortcol[t]="",this.check=null),this.paginateData(a)},formatDate(t){if(null==t)return"Chưa nhận";let a=c()(String(t)).format("DD/MM/YYYY");return a},openModal(t){u()(".button-show-modal").click((function(){var t=u()(this).attr("id");u()("#modal-container").removeAttr("class").addClass(t),u()("body").addClass("modal-active")})),u()(".button-show-modal-out").click((function(){u()("#modal-container").addClass("out"),u()("body").removeClass("modal-active")})),(0,r.yJ)(t).then((t=>{console.log(t),this.listCampaignDetail=t}))},checkStatus(t){return-1==t?'<button type="button" class="btn btn-danger">Đã hủy</button>':1==t?'<button type="button" class="btn btn-warning">Chưa hoàn thành</button>':2==t?'<button type="button" class="btn btn-info">Đang chờ</button>':3==t?'<button type="button" class="btn btn-secondary">Đang chạy</button>':4==t?'<button type="button" class="btn btn-dark">Thành công</button>':void 0}},mounted(){}},h=d,m=e(43736),p=(0,m.Z)(h,n,s,!1,null,"53b50ea5",null),f=p.exports},89835:function(t,a,e){e.d(a,{Ec:function(){return c},Ot:function(){return l},bn:function(){return u},ds:function(){return d},nt:function(){return r},yJ:function(){return o}});var n=e(31223),s=e(26166);let i=(0,n.X)();function r(){return new Promise(((t,a)=>{var e={method:"get",url:i+"/api/v1/admin/campaign",headers:{"Content-Type":"application/json"}};s(e).then((function(a){t(a.data.data)})).catch((function(t){a(t)}))}))}function o(t){return new Promise(((a,e)=>{var n={method:"get",url:i+"/api/v1/admin/campaign/detail/"+t,headers:{"Content-Type":"application/json"}};s(n).then((function(t){a(t.data.data)})).catch((function(t){e(t)}))}))}function c(t){return new Promise(((a,e)=>{var n={method:"post",url:i+"/api/v1/admin/campaign/add",headers:{"Content-Type":"application/json"},data:t};s(n).then((function(t){a(t.data.data)})).catch((function(t){e(t)}))}))}function l(t){return new Promise(((a,e)=>{var n={method:"post",url:i+"/api/v1/admin/campaign/detail/add",headers:{"Content-Type":"application/json"},data:t};s(n).then((function(t){a(t.data.data)})).catch((function(t){e(t)}))}))}function u(){return new Promise(((t,a)=>{var e={method:"get",url:i+"/api/v1/admin/campaign/detail/product",headers:{"Content-Type":"application/json"}};s(e).then((function(a){t(a.data.data)})).catch((function(t){a(t)}))}))}function d(t){return new Promise(((a,e)=>{var n={method:"get",url:i+"/api/v1/admin/campaign/finish?campaignId="+t,headers:{"Content-Type":"application/json"}};s(n).then((function(t){a(t.data.data)})).catch((function(t){e(t)}))}))}}}]);
//# sourceMappingURL=869.b4601476.js.map