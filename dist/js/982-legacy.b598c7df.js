"use strict";(self["webpackChunkfront_end_do_an"]=self["webpackChunkfront_end_do_an"]||[]).push([[982],{42982:function(t,a,n){n.r(a),n.d(a,{default:function(){return g}});var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("AdminHeaderCampaign",{attrs:{activeValue:0}}),t._m(0),n("form",{attrs:{id:"m-form-admin-add-product"},on:{submit:function(a){return a.preventDefault(),t.campaginCallApi.apply(null,arguments)}}},[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v("Tên sự kiện")]),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.campaign.campaignName.$model,expression:"$v.campaign.campaignName.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Vui lòng nhập tên chiến dịch",id:"campaignName",name:"campaignName"},domProps:{value:t.$v.campaign.campaignName.$model},on:{input:function(a){a.target.composing||t.$set(t.$v.campaign.campaignName,"$model",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}}),t.submitted&&!t.$v.campaign.campaignName.required?n("div",{staticClass:"error"},[t._v(" Tên sự kiện không thể để trống ")]):t._e()])]),n("div",{staticClass:"col-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v("Ngày bắt đầu sự kiện")]),n("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"small",name:"birthDay",type:"datetime",placeholder:"dd/MM/yyyy","picker-options":t.pickerOptions,format:"dd/MM/yyyy"},model:{value:t.$v.startDay.$model,callback:function(a){t.$set(t.$v.startDay,"$model","string"===typeof a?a.trim():a)},expression:"$v.startDay.$model"}},[t._v(" > ")]),t.submitted&&!t.$v.startDay.required?n("div",{staticClass:"error"},[t._v(" Ngày bắt đầu không được để trống ")]):t._e(),t.submitted&&t.$v.startDay.required&&new Date(t.startDay)<t.now?n("div",{staticClass:"error"},[t._v(" Ngày bắt đầu không được nhỏ hơn hoặc bằng ngày hiên tại ")]):t._e(),t.submitted&&t.$v.startDay.required&&new Date(t.endDay)<new Date(t.startDay)?n("div",{staticClass:"error"},[t._v(" Ngày bắt đầu không được lớn hơn ngày kết thúc ")]):t._e()],1)]),n("div",{staticClass:"col-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v("Ngày kết thúc sự kiện")]),n("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"small",name:"birthDay",type:"datetime",placeholder:"dd/MM/yyyy","picker-options":t.pickerOptions,format:"dd/MM/yyyy"},model:{value:t.$v.endDay.$model,callback:function(a){t.$set(t.$v.endDay,"$model","string"===typeof a?a.trim():a)},expression:"$v.endDay.$model"}},[t._v(" > ")]),t.submitted&&!t.$v.endDay.required?n("div",{staticClass:"error"},[t._v(" Ngày kết thúc không được để trống ")]):t._e(),t.submitted&&t.$v.endDay.required&&new Date(t.endDay)<t.now?n("div",{staticClass:"error"},[t._v(" Ngày kết thúc không được nhỏ hoặc bằng ngày hiên tại ")]):t._e()],1)]),n("div",{staticClass:"col-12"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"content"}},[t._v("Nội dung")]),n("ckeditor",{attrs:{editor:t.editor},model:{value:t.$v.campaign.content.$model,callback:function(a){t.$set(t.$v.campaign.content,"$model","string"===typeof a?a.trim():a)},expression:"$v.campaign.content.$model"}}),t.submitted&&!t.$v.campaign.content.required?n("div",{staticClass:"error"},[t._v(" Nội dung không thể để trống ")]):t._e()],1)]),n("div",{staticClass:"col-12"},[n("div",{staticClass:"d-flex justify-content-around mt-5"},[n("div",[n("button",{staticClass:"btn btn-outline-primary",attrs:{type:"submit",id:"m-into-choose-product"}},[[t._v(" Tạo sự kiện ")]],2)]),n("div",[n("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",plain:""},on:{click:t.cancelCampaign}},[t._v(" Quay lại ")])])])])])])])],1)},i=[function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"m-admin-product-action-title text-center border-bottom"},[n("h2",[t._v("Thêm chiến dịch")])])}],r=(n(38862),n(70297)),c=n(32424),o=n(6409),s=n(18756),d=n.n(s),l=n(89835),u=n(17133),m=n.n(u),p={components:{AdminHeaderCampaign:r.Z},name:"campaign-add",mixins:[c.oE],data:function(){return{submitted:!1,editor:d(),now:new Date,campaign:{campaignName:"",content:"",startDay:"",endDay:""},startDay:"",endDay:"",pickerOptions:{shortcuts:[{text:"Hiện tại",onClick:function(t){t.$emit("pick",new Date)}},{text:"Hôm qua",onClick:function(t){var a=new Date;a.setTime(a.getTime()-864e5),t.$emit("pick",a)}},{text:"1 tuần trước",onClick:function(t){var a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",a)}}]}}},validations:{campaign:{campaignName:{required:o.C1},content:{required:o.C1}},startDay:{required:o.C1},endDay:{required:o.C1}},methods:{campaginCallApi:function(t){var a=this;if(t.preventDefault(),this.submitted=!0,this.$v.$touch(),this.$v.$invalid)console.log("error validate");else{var n=m()(this.startDay).format("YYYY-MM-DD");this.campaign.startDay=n;var e=m()(this.endDay).format("YYYY-MM-DD");this.campaign.endDay=e;var i=JSON.stringify(this.campaign);console.log(i),(0,l.Ec)(i).then((function(t){a.$swal("Thành công","Tạo chiến dịch thành công","success").then((function(){a.$router.push("/admin/campaign/".concat(t,"/detail"))}))})).catch((function(t){console.log(t),a.$swal("Thất bại","Tạo chiến dịch thất bại","error")}))}},cancelCampaign:function(){this.$router.push("/admin/campaign")}}},v=p,h=n(43736),f=(0,h.Z)(v,e,i,!1,null,"79e8bc4a",null),g=f.exports},70297:function(t,a,n){n.d(a,{Z:function(){return d}});var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"mt-3"},[n("div",{staticClass:"container"},[n("el-steps",{attrs:{active:t.active,"finish-status":"success"}},[n("el-step",{attrs:{title:"Tạo sự kiện"}}),n("el-step",{attrs:{title:"Thêm thêm chi tiết sự kiện"}}),n("el-step",{attrs:{title:"Hoàn tất"}})],1)],1)])},i=[],r=(n(9653),{props:{activeValue:Number},data:function(){return{active:this.activeValue}}}),c=r,o=n(43736),s=(0,o.Z)(c,e,i,!1,null,"40d5dbbe",null),d=s.exports},89835:function(t,a,n){n.d(a,{Ec:function(){return s},Ot:function(){return d},bn:function(){return l},ds:function(){return u},nt:function(){return c},yJ:function(){return o}});n(41539);var e=n(31223),i=n(26166),r=(0,e.X)();function c(){return new Promise((function(t,a){var n={method:"get",url:r+"/api/v1/admin/campaign",headers:{"Content-Type":"application/json"}};i(n).then((function(a){t(a.data.data)})).catch((function(t){a(t)}))}))}function o(t){return new Promise((function(a,n){var e={method:"get",url:r+"/api/v1/admin/campaign/detail/"+t,headers:{"Content-Type":"application/json"}};i(e).then((function(t){a(t.data.data)})).catch((function(t){n(t)}))}))}function s(t){return new Promise((function(a,n){var e={method:"post",url:r+"/api/v1/admin/campaign/add",headers:{"Content-Type":"application/json"},data:t};i(e).then((function(t){a(t.data.data)})).catch((function(t){n(t)}))}))}function d(t){return new Promise((function(a,n){var e={method:"post",url:r+"/api/v1/admin/campaign/detail/add",headers:{"Content-Type":"application/json"},data:t};i(e).then((function(t){a(t.data.data)})).catch((function(t){n(t)}))}))}function l(){return new Promise((function(t,a){var n={method:"get",url:r+"/api/v1/admin/campaign/detail/product",headers:{"Content-Type":"application/json"}};i(n).then((function(a){t(a.data.data)})).catch((function(t){a(t)}))}))}function u(t){return new Promise((function(a,n){var e={method:"get",url:r+"/api/v1/admin/campaign/finish?campaignId="+t,headers:{"Content-Type":"application/json"}};i(e).then((function(t){a(t.data.data)})).catch((function(t){n(t)}))}))}}}]);
//# sourceMappingURL=982-legacy.b598c7df.js.map