"use strict";(self["webpackChunkfront_end_do_an"]=self["webpackChunkfront_end_do_an"]||[]).push([[428],{33428:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mt-5"},[i("HeaderCart",{attrs:{activeValue:t.activeValue}}),i("div",{staticClass:"container mt-5"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-8 pt-1"},[i("div",{staticClass:"product"},[t._m(0),i("hr"),i("div",{staticClass:"container-fluid"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-6"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"fullName"}},[t._v("Họ và tên")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.fullName,expression:"user.fullName"}],staticClass:"form-control",attrs:{type:"text",id:"fullName",name:"fullName",placeholder:"Nhập họ và tên",disabled:""},domProps:{value:t.user.fullName},on:{input:function(e){e.target.composing||t.$set(t.user,"fullName",e.target.value)}}})])]),i("div",{staticClass:"col-6"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"phone"}},[t._v("Số điện thoại")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.user.phone,expression:"user.phone"}],staticClass:"form-control",attrs:{type:"text",id:"phone",name:"phone",placeholder:"Vui lòng nhập số điện thoại",disabled:""},domProps:{value:t.user.phone},on:{input:function(e){e.target.composing||t.$set(t.user,"phone",e.target.value)}}})])]),i("div",{staticClass:"col-4"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"city"}},[t._v("Tỉnh / Thành Phố")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.bill.city,expression:"bill.city"}],staticClass:"form-control",attrs:{id:"city"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.bill,"city",e.target.multiple?i:i[0])},t.chooseCity]}},[i("option",{attrs:{selected:"",value:"0"}},[t._v("--Lựa Chọn--")]),t._l(t.listCity,(function(e){return i("option",{key:e.ProvinceID,domProps:{value:e.ProvinceID}},[t._v(" "+t._s(e.ProvinceName)+" ")])}))],2)])]),i("div",{staticClass:"col-4"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"district"}},[t._v("Quận / Huyện")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.bill.district,expression:"bill.district"}],staticClass:"form-control",attrs:{id:"district"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.bill,"district",e.target.multiple?i:i[0])},t.chooseDistrict]}},[i("option",{attrs:{selected:"",value:"0"}},[t._v("--Lựa Chọn--")]),t._l(t.listDistrict,(function(e){return i("option",{key:e.DistrictID,domProps:{value:e.DistrictID}},[t._v(" "+t._s(e.DistrictName)+" ")])}))],2)])]),i("div",{staticClass:"col-4"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"ward"}},[t._v("Phường / Xã")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.bill.ward,expression:"bill.ward"}],staticClass:"form-control",attrs:{id:"ward"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.bill,"ward",e.target.multiple?i:i[0])},t.chooseWard]}},[i("option",{attrs:{selected:"",value:"0"}},[t._v("--Lựa Chọn--")]),t._l(t.listWard,(function(e){return i("option",{key:e.WardCode,domProps:{value:e.WardCode}},[t._v(" "+t._s(e.WardName)+" ")])}))],2)])]),i("div",{staticClass:"col-12"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"phone"}},[t._v("Địa chỉ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.bill.address,expression:"bill.address"}],staticClass:"form-control",attrs:{type:"text",id:"address",name:"address",placeholder:"Vui lòng nhập địa chỉ"},domProps:{value:t.bill.address},on:{input:function(e){e.target.composing||t.$set(t.bill,"address",e.target.value)}}})])]),i("div",{staticClass:"col-12"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"phone"}},[t._v("Ghi chú")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.bill.note,expression:"bill.note"}],staticClass:"form-control",attrs:{name:"note",id:"note",rows:"5"},domProps:{value:t.bill.note},on:{input:function(e){e.target.composing||t.$set(t.bill,"note",e.target.value)}}})])])])])]),i("div",{staticClass:"product"},[t._m(1),i("div",{staticClass:"bill-pay"},[i("button",{class:1==t.bill.pay?"btn-bill-pay active":"btn-bill-pay",on:{click:t.choosePay}},[i("div",[t._v("Thanh toán khi nhận hàng")]),t._m(2)]),i("button",{class:2==t.bill.pay?"btn-bill-pay active":"btn-bill-pay",on:{click:t.chooseVNPay}},[i("div",[t._v("Thanh toán qua VNPAY")]),t._m(3)])])]),i("div",{staticClass:"product"},[t._m(4),i("div",{staticClass:"bill-pay"},[i("table",{staticClass:"table table secondary-5:border text-center"},[t._m(5),t.listProduct.length>=0?i("tbody",t._l(t.getListProduct,(function(e,a){return i("tr",{key:e.id},[i("td",[t._v(t._s(a+1))]),i("td",{staticClass:"d-flex justify-content-center"},[i("div",[i("img",{staticClass:"product-img",attrs:{src:e.img,alt:""}})]),i("div",{staticClass:"product-name"},[i("div",[t._v(" "+t._s(null==e.parentId?e.productName:e.parentName)+" ")]),i("div",{staticClass:"d-flex"},t._l(e.speciality,(function(e){return i("div",{key:e.id},[i("div",[i("button",{staticClass:"product-speciality"},[t._v(" "+t._s(e.description)+" ")])])])})),0)])]),i("td",[t._v(t._s(t.toMoney(e.priceSell)))]),i("td",[t._v(" "+t._s(e.quantity)+" ")]),i("td",{attrs:{id:"total"+e.id}},[t._v(t._s(t.toMoney(e.totalPrice)))])])})),0):t._e(),0==t.listProduct.length?i("tbody",[i("tr",[i("th"),i("th"),i("th",[t._v(t._s(t.errorMessage))]),i("th"),i("th"),i("th")])]):t._e()])])])]),i("div",{staticClass:"col-4 pt-1"},[i("div",{staticClass:"product-bill"},[t._m(6),i("hr"),i("div",{staticClass:"bill-content"},[i("div",{staticClass:"container"},[i("div",{staticClass:"row text-center pl-2 pr-2 pb-4"},[t._m(7),i("div",{staticClass:"col-6 mt-2"},[i("h6",[t._v(t._s(t.toMoney(this.totalBill)))])]),t._m(8),i("div",{staticClass:"col-6 mt-2"},[i("h6",[t._v(t._s(t.toMoney(t.feeShip)))])]),t._m(9),i("div",{staticClass:"col-6 mt-2"},[i("h6",[t._v(t._s(t.toMoney(this.totalBillPay)))])]),t._m(10),i("div",{staticClass:"col-12 mt-2"},[i("button",{staticClass:"btn btn-outline-dark w-100 button-cart",attrs:{type:"button"},on:{click:t.ActionPayMent}},[t._v(" Thanh toán ")])]),t._m(11)])])])])])])])],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pb-2"},[i("h4",{staticClass:"text-center"},[t._v("Thông tin giao hàng")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h4",{staticClass:"text-center"},[t._v("Phương thức thanh toán")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("img",{attrs:{src:"https://firebasestorage.googleapis.com/v0/b/san-ho-do-an-dai-duong.appspot.com/o/banner%2Fcod.svg?alt=media",alt:"",srcset:""}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("img",{attrs:{src:"https://firebasestorage.googleapis.com/v0/b/san-ho-do-an-dai-duong.appspot.com/o/banner%2Fvnpay.svg?alt=media",alt:""}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("h4",{staticClass:"text-center"},[t._v("Giỏ hàng")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("th",[t._v("Stt")]),i("th",[t._v("Sản phẩm")]),i("th",[t._v("Giá")]),i("th",[t._v("Số Lượng")]),i("th",[t._v("Tổng")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pb-2"},[i("h4",{staticClass:"text-center"},[t._v("Đơn hàng")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-6 mt-2"},[i("h6",[t._v("Giá gốc:")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-6 mt-2"},[i("h6",[t._v("Phí ship:")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-6 mt-2"},[i("h6",[t._v("Tổng tiền thanh toán:")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-12 mt-2"},[i("div",{staticClass:"row"},[i("div",{staticClass:"form-group col-8"},[i("input",{staticClass:"form-control",attrs:{type:"text",id:"fullName",name:"fullName",placeholder:"Nhập mã giảm giá"}})]),i("div",{staticClass:"col-4"},[i("button",{staticClass:"btn btn-dark",attrs:{type:"button"}},[i("span",{staticStyle:{"font-size":"14px"}},[t._v("Áp dụng")])])])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-12 mt-2"},[i("button",{staticClass:"btn btn-outline-dark w-100 button-cart",attrs:{type:"button"}},[t._v(" Quay lại giỏ hàng ")])])}],n=i(61396),r=i(30403),o=i(90259),l=i(69409),c={props:["productId","quantity"],data(){return{activeValue:1,listProduct:[],errorMessage:"Chưa có sản phẩm nào !",totalBill:0,feeShip:3e4,totalBillPay:0,bill:{city:0,district:0,ward:0,note:"",pay:!1,address:"",productId:this.productId,quantity:this.quantity},listCity:[],listDistrict:[],listWard:[],user:{}}},components:{HeaderCart:n.Z},computed:{getListProduct(){return this.listProduct}},created(){window.scrollTo(0,0),this.checkGetListProduct(),(0,r.hw)().then((t=>{this.listCity=t})).catch((t=>{console.log(t)})),(0,o.n)().then((t=>{this.user=t,this.bill.city=null==this.user.city?0:+this.user.city,this.chooseCity(),this.bill.district=null==this.user.district?0:+this.user.district,this.chooseDistrict(),this.bill.ward=null==this.user.ward?0:this.user.ward,this.bill.address=this.user.address})).catch((t=>{console.log(t)}))},methods:{checkGetListProduct(){let t=this,e=`?productId=${this.productId}&quantity=${this.quantity}`;(0,l.Wx)(e).then((t=>{Array.isArray(t)?this.listProduct=t:this.listProduct=[],this.sumMoney()})).catch((e=>{console.log(e.response.data),t.$router.push("/404")}))},sumMoney(){this.totalBill=0,this.listProduct.forEach((t=>{this.totalBill+=t.totalPrice})),this.totalBill>7e5&&(this.feeShip=0),this.totalBillPay=this.totalBill+this.feeShip},toMoney(t){var e=new Intl.NumberFormat("it-IT",{style:"currency",currency:"VND"});return e.format(t)},chooseCity(){this.listDistrict=[],this.listWard=[],this.bill.district=0,this.bill.ward=0;let t={province_id:this.bill.city};t=JSON.stringify(t),(0,r._h)(t).then((t=>{this.listDistrict=t})).catch((t=>{console.log(t)}))},chooseDistrict(){this.listWard=[],this.bill.ward=0;let t={district_id:this.bill.district};t=JSON.stringify(t),(0,r.ih)(t).then((t=>{this.listWard=t})).catch((t=>{console.log(t)}))},chooseWard(){},choosePay(){this.bill.pay=1},chooseVNPay(){this.bill.pay=2},ActionPayMent(){let t=this,e=0==this.bill.city||0==this.bill.district||0==this.bill.ward||""==this.bill.address;if(e)return void this.$swal("Yêu cầu","Vui lòng nhập đầy đủ địa chỉ","error").then((function(){}));if(!this.bill.pay)return void this.$swal("Yêu cầu","Vui lòng chọn phương thức thành toán","error").then((function(){}));let i=document.getElementById("city"),a=i.options[i.selectedIndex].text,s=document.getElementById("district"),n=s.options[s.selectedIndex].text,r=document.getElementById("ward"),o=r.options[r.selectedIndex].text,c=this.bill.address+" - "+o+" - "+n+" - "+a;console.log(c),this.bill.addressDetail=c;let u=JSON.stringify(this.bill);console.log(u),(0,l.ul)(u).then((e=>{this.$root.$refs.userHeader.totalItemByCart(),t.$swal("Thành công",e.data,"success").then((function(){t.$router.push("/hoan-thanh-dat-hang")}))})).catch((e=>{t.$swal("Lỗi",e.response.data.data,"error")}))}}},u=c,d=i(43736),h=(0,d.Z)(u,a,s,!1,null,"24cf12c0",null),p=h.exports},61396:function(t,e,i){i.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"container"},[i("el-steps",{attrs:{active:t.active,"finish-status":"success"}},[i("el-step",{attrs:{title:"Giỏ hàng"}}),i("el-step",{attrs:{title:"Đặt hàng"}}),i("el-step",{attrs:{title:"Hoàn tất"}})],1)],1)])},s=[],n={props:{activeValue:Number},data(){return{active:this.activeValue}}},r=n,o=i(43736),l=(0,o.Z)(r,a,s,!1,null,"d64159e6",null),c=l.exports},30403:function(t,e,i){i.d(e,{_h:function(){return n},hw:function(){return s},ih:function(){return r}});var a=i(26166);function s(){return new Promise(((t,e)=>{var i={method:"get",url:"https://online-gateway.ghn.vn/shiip/public-api/master-data/province",headers:{"Content-Type":"application/json",token:"f3c6e338-c3a8-11ec-9bdc-f620c30e1b62"}};a(i).then((function(e){t(e.data.data)})).catch((function(t){e(t)}))}))}function n(t){return new Promise(((e,i)=>{var s={method:"post",url:"https://online-gateway.ghn.vn/shiip/public-api/master-data/district",headers:{"Content-Type":"application/json",token:"f3c6e338-c3a8-11ec-9bdc-f620c30e1b62"},data:t};a(s).then((function(t){e(t.data.data)})).catch((function(t){i(t)}))}))}function r(t){return new Promise(((e,i)=>{var s={method:"post",url:"https://online-gateway.ghn.vn/shiip/public-api/master-data/ward?district_id",headers:{"Content-Type":"application/json",token:"f3c6e338-c3a8-11ec-9bdc-f620c30e1b62"},data:t};a(s).then((function(t){e(t.data.data)})).catch((function(t){i(t)}))}))}},69409:function(t,e,i){i.d(e,{Ne:function(){return l},PZ:function(){return u},Wx:function(){return h},XE:function(){return d},cR:function(){return o},p7:function(){return r},ul:function(){return p},zA:function(){return c}});var a=i(31223),s=i(26166);let n=(0,a.X)();function r(t){return new Promise(((e,i)=>{var a={method:"post",url:n+"/api/v3/user/bill",headers:{"Content-Type":"application/json"},data:t};s(a).then((function(t){e(t.data.data)})).catch((function(t){i(t)}))}))}function o(t,e){return new Promise(((i,a)=>{var r={method:"get",url:n+"/api/v3/user/bill/status/"+t+"/?page="+e,headers:{"Content-Type":"application/json"}};s(r).then((function(t){i(t.data.data)})).catch((function(t){a(t)}))}))}function l(t){return new Promise(((e,i)=>{var a={method:"get",url:n+"/api/v3/user/bill/total/"+t,headers:{"Content-Type":"application/json"}};s(a).then((function(t){e(t.data.data)})).catch((function(t){i(t)}))}))}function c(t){return new Promise(((e,i)=>{var a={method:"put",url:n+"/api/v3/user/bill/cancel/"+t,headers:{"Content-Type":"application/json"}};s(a).then((function(t){e(t.data)})).catch((function(t){console.log(t),i(t)}))}))}function u(t){return new Promise(((e,i)=>{var a={method:"get",url:n+"/api/v3/user/bill/detail/"+t,headers:{"Content-Type":"application/json"}};s(a).then((function(t){e(t.data.data)})).catch((function(t){i(t)}))}))}function d(t){return new Promise(((e,i)=>{var a={method:"post",url:n+"/api/v3/user/comment/review",headers:{"Content-Type":"application/json"},data:t};s(a).then((function(t){e(t.data.data)})).catch((function(t){i(t)}))}))}function h(t){return new Promise(((e,i)=>{var a={method:"get",url:n+"/api/v3/user/bill/pay-now"+t,headers:{"Content-Type":"application/json"}};s(a).then((function(t){e(t.data.data)})).catch((function(t){i(t)}))}))}function p(t){return new Promise(((e,i)=>{var a={method:"post",url:n+"/api/v3/user/bill/pay-now",headers:{"Content-Type":"application/json"},data:t};s(a).then((function(t){e(t.data.data)})).catch((function(t){i(t)}))}))}},90259:function(t,e,i){i.d(e,{g:function(){return o},n:function(){return r}});var a=i(31223),s=i(26166);let n=(0,a.X)();function r(){return new Promise(((t,e)=>{var i={method:"get",url:n+"/api/v3/user/detail",headers:{"Content-Type":"application/json"}};s(i).then((function(e){t(e.data.data)})).catch((function(t){e(t)}))}))}function o(t){return new Promise(((e,i)=>{var a={method:"post",url:n+"/api/v3/user/detail",headers:{"Content-Type":"application/json"},data:t};s(a).then((function(t){e(t.data.data)})).catch((function(t){i(t.response.data)}))}))}}}]);
//# sourceMappingURL=428.feb437ec.js.map