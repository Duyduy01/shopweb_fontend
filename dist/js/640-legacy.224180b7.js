"use strict";(self["webpackChunkfront_end_do_an"]=self["webpackChunkfront_end_do_an"]||[]).push([[640],{83640:function(t,e,i){i.r(e),i.d(e,{default:function(){return f}});var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"container"},[i("div",{staticClass:"row"},[t._m(0),i("form",{staticClass:"row",on:{submit:function(e){return e.preventDefault(),t.updateProfileCallApi.apply(null,arguments)}}},[i("div",{staticClass:"form-group col-6"},[i("label",{attrs:{for:""}},[t._v("Họ và tên")]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.user.fullName.$model,expression:"$v.user.fullName.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Vui lòng nhập họ và tên",id:"fullName",name:"fullName"},domProps:{value:t.$v.user.fullName.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.user.fullName,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.submitted&&!t.$v.user.fullName.required?i("div",{staticClass:"error"},[t._v(" Vui lòng nhập họ và tên ")]):t._e()]),i("div",{staticClass:"form-group col-6"},[i("label",{attrs:{for:""}},[t._v("Số điện thoại")]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.user.phone.$model,expression:"$v.user.phone.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Vui lòng nhập số điện thoại",id:"phone",name:"phone"},domProps:{value:t.$v.user.phone.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.user.phone,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.submitted&&!t.$v.user.phone.required?i("div",{staticClass:"error"},[t._v(" Vui lòng nhập số điện thoại ")]):t._e()]),i("div",{staticClass:"form-group col-6"},[i("label",{attrs:{for:""}},[t._v("Email")]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.user.email.$model,expression:"$v.user.email.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Vui lòng nhập email",id:"email",name:"email",value:"",disabled:""},domProps:{value:t.$v.user.email.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.user.email,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.submitted&&!t.$v.user.email.required?i("div",{staticClass:"error"},[t._v(" Vui lòng nhập địa chỉ email ")]):t._e()]),i("div",{staticClass:"form-group col-6"},[i("label",{staticClass:"d-block",attrs:{for:""}},[t._v("Ngày sinh")]),i("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"small",name:"birthDay",type:"datetime",placeholder:"dd/MM/yyyy","picker-options":t.pickerOptions,format:"dd/MM/yyyy"},model:{value:t.$v.birthday.$model,callback:function(e){t.$set(t.$v.birthday,"$model","string"===typeof e?e.trim():e)},expression:"$v.birthday.$model"}},[t._v(" > ")]),t.submitted&&!t.$v.birthday.required?i("div",{staticClass:"error"},[t._v(" Vui lòng chọn ngày sinh ")]):t._e()],1),i("div",{staticClass:"form-group col-12 d-flex"},[i("div",{staticClass:"custom-control custom-radio mr-3"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.user.gender.$model,expression:"$v.user.gender.$model",modifiers:{trim:!0}}],staticClass:"custom-control-input",attrs:{type:"radio",id:"male",name:"gender",value:"1"},domProps:{checked:t._q(t.$v.user.gender.$model,"1")},on:{change:function(e){return t.$set(t.$v.user.gender,"$model","1")}}}),i("label",{staticClass:"custom-control-label",attrs:{for:"male"}},[t._v("Nam")])]),i("div",{staticClass:"custom-control custom-radio"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.user.gender.$model,expression:"$v.user.gender.$model",modifiers:{trim:!0}}],staticClass:"custom-control-input",attrs:{type:"radio",id:"female",name:"gender",value:"2"},domProps:{checked:t._q(t.$v.user.gender.$model,"2")},on:{change:function(e){return t.$set(t.$v.user.gender,"$model","2")}}}),i("label",{staticClass:"custom-control-label",attrs:{for:"female"}},[t._v("Nữ")])]),t.submitted&&!t.$v.user.gender.required?i("div",{staticClass:"error ml-2"},[t._v(" Vui lòng chọn giới tính ")]):t._e()]),i("div",{staticClass:"form-group col-6"},[i("label",{attrs:{for:""}},[t._v("Tỉnh / Thành phố")]),i("div",{attrs:{id:"address-city"}}),i("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.user.city.$model,expression:"$v.user.city.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"city"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.$v.user.city,"$model",e.target.multiple?i:i[0])},t.chooseCity]}},[i("option",{attrs:{value:" "}},[t._v("--Lựa Chọn--")]),t._l(t.listCity,(function(e){return i("option",{key:e.ProvinceID,domProps:{value:e.ProvinceID}},[t._v(" "+t._s(e.ProvinceName)+" ")])}))],2),t.submitted&&!t.$v.user.city.required?i("div",{staticClass:"error"},[t._v(" Vui lòng chọn Tỉnh / Thành Phố ")]):t._e()]),i("div",{staticClass:"form-group col-6"},[i("label",{attrs:{for:""}},[t._v("Quận / Huyện")]),i("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.user.district.$model,expression:"$v.user.district.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"district"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.$v.user.district,"$model",e.target.multiple?i:i[0])},t.chooseDistrict]}},[i("option",{attrs:{value:" "}},[t._v("--Lựa Chọn--")]),t._l(t.listDistrict,(function(e){return i("option",{key:e.DistrictID,domProps:{value:e.DistrictID}},[t._v(" "+t._s(e.DistrictName)+" ")])}))],2),t.submitted&&!t.$v.user.district.required?i("div",{staticClass:"error"},[t._v(" Vui lòng chọn Quận / Huyện ")]):t._e()]),i("div",{staticClass:"form-group col-6"},[i("label",{attrs:{for:""}},[t._v("Phường / Xã")]),i("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.user.ward.$model,expression:"$v.user.ward.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"ward"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.$v.user.ward,"$model",e.target.multiple?i:i[0])},t.chooseWard]}},[i("option",{attrs:{value:" "}},[t._v("--Lựa Chọn--")]),t._l(t.listWard,(function(e){return i("option",{key:e.WardCode,domProps:{value:e.WardCode}},[t._v(" "+t._s(e.WardName)+" ")])}))],2),t.submitted&&!t.$v.user.ward.required?i("div",{staticClass:"error"},[t._v(" Vui lòng chọn Phường / Xã ")]):t._e()]),i("div",{staticClass:"form-group col-6"},[i("label",{attrs:{for:"address"}},[t._v("Địa chỉ")]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.user.address.$model,expression:"$v.user.address.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Vui lòng địa chỉ ",id:"address",name:"address",value:""},domProps:{value:t.$v.user.address.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.user.address,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.submitted&&!t.$v.user.address.required?i("div",{staticClass:"error"},[t._v(" Vui lòng nhập địa chỉ nhà ")]):t._e()]),t._m(1)])])])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-12"},[i("h4",{staticClass:"text-center"},[t._v("Thông tin cá nhân")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-group col-12 d-flex justify-content-center mt-5"},[i("button",{staticClass:"btn btn-outline-dark",attrs:{type:"submit"}},[t._v("Cập nhập")])])}],s=(i(38862),i(30403)),a=i(90259),o=i(32424),l=i(17133),c=i.n(l),u=i(6409),d={components:{},name:"ManagerUserInfoView",mixins:[o.oE],data:function(){return{submitted:!1,listCity:[],listDistrict:[],listWard:[],user:{fullname:"",phone:"",email:"",birthday:"",gender:"",city:"",district:"",ward:"",address:""},pickerOptions:{shortcuts:[{text:"Hiện tại",onClick:function(t){t.$emit("pick",new Date)}},{text:"Hôm qua",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"1 tuần trước",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},birthday:""}},validations:{user:{fullName:{required:u.C1},phone:{required:u.C1,numeric:u.uR,minLength:(0,u.Ei)(10),maxLength:(0,u.BS)(12)},email:{required:u.C1},gender:{required:u.C1},city:{required:u.C1},district:{required:u.C1},ward:{required:u.C1},address:{required:u.C1}},birthday:{required:u.C1}},created:function(){var t=this;(0,s.hw)().then((function(e){t.listCity=e})).catch((function(t){console.log(t)})),(0,a.n)().then((function(e){console.log(e),t.birthday=new Date(e.birthday),t.user=e,t.user.city=null==t.user.city?" ":+t.user.city,t.user.district=null==t.user.district?" ":+t.user.district,t.user.ward=null==t.user.ward?" ":t.user.ward," "!=t.user.city&&" "!=t.user.district&&t.activeAddress()})).catch((function(t){console.log(t)}))},methods:{updateProfileCallApi:function(t){var e=this;if(t.preventDefault(),this.submitted=!0,this.$v.$touch(),this.$v.$invalid)console.log("error validate");else{var i=c()(this.birthday).format("YYYY-MM-DD");this.user.birthday=i,this.user.city;var r=JSON.stringify(this.user);(0,a.g)(r).then((function(t){e.$swal("Thành công",t.data,"success").then((function(t){t&&(e.$store.commit("LOGOUT"),window.location="/dang-nhap")}))})).catch((function(t){e.$swal("lỗi",t.data,"error")}))}},chooseCity:function(){var t=this;this.listDistrict=[],this.listWard=[],this.user.district=" ",this.user.ward=" ";var e={province_id:this.user.city};e=JSON.stringify(e),(0,s._h)(e).then((function(e){t.listDistrict=e})).catch((function(t){console.log(t)}))},chooseDistrict:function(){var t=this;if(this.listWard=[],this.user.ward=" "," "!=this.user.district){var e={district_id:this.user.district};e=JSON.stringify(e),(0,s.ih)(e).then((function(e){t.listWard=e})).catch((function(t){console.log(t)}))}},chooseWard:function(){},activeAddress:function(){var t=this,e={province_id:this.user.city};e=JSON.stringify(e),(0,s._h)(e).then((function(e){t.listDistrict=e})).catch((function(t){console.log(t)}));var i={district_id:this.user.district};i=JSON.stringify(i),(0,s.ih)(i).then((function(e){t.listWard=e})).catch((function(t){console.log(t)}))}},mounted:function(){}},m=d,v=i(43736),h=(0,v.Z)(m,r,n,!1,null,"d6ce7226",null),f=h.exports},30403:function(t,e,i){i.d(e,{_h:function(){return s},hw:function(){return n},ih:function(){return a}});i(41539);var r=i(26166);function n(){return new Promise((function(t,e){var i={method:"get",url:"https://online-gateway.ghn.vn/shiip/public-api/master-data/province",headers:{"Content-Type":"application/json",token:"f3c6e338-c3a8-11ec-9bdc-f620c30e1b62"}};r(i).then((function(e){t(e.data.data)})).catch((function(t){e(t)}))}))}function s(t){return new Promise((function(e,i){var n={method:"post",url:"https://online-gateway.ghn.vn/shiip/public-api/master-data/district",headers:{"Content-Type":"application/json",token:"f3c6e338-c3a8-11ec-9bdc-f620c30e1b62"},data:t};r(n).then((function(t){e(t.data.data)})).catch((function(t){i(t)}))}))}function a(t){return new Promise((function(e,i){var n={method:"post",url:"https://online-gateway.ghn.vn/shiip/public-api/master-data/ward?district_id",headers:{"Content-Type":"application/json",token:"f3c6e338-c3a8-11ec-9bdc-f620c30e1b62"},data:t};r(n).then((function(t){e(t.data.data)})).catch((function(t){i(t)}))}))}},90259:function(t,e,i){i.d(e,{g:function(){return o},n:function(){return a}});i(41539);var r=i(31223),n=i(26166),s=(0,r.X)();function a(){return new Promise((function(t,e){var i={method:"get",url:s+"/api/v3/user/detail",headers:{"Content-Type":"application/json"}};n(i).then((function(e){t(e.data.data)})).catch((function(t){e(t)}))}))}function o(t){return new Promise((function(e,i){var r={method:"post",url:s+"/api/v3/user/detail",headers:{"Content-Type":"application/json"},data:t};n(r).then((function(t){e(t.data.data)})).catch((function(t){i(t.response.data)}))}))}}}]);
//# sourceMappingURL=640-legacy.224180b7.js.map